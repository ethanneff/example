{"version":3,"sources":["apps/Arcade/PapiJump/index.tsx","apps/Arcade/Archero/index.tsx","apps/Arcade/Landing/index.tsx","apps/Arcade/Snake/index.web.tsx","apps/Arcade/FlappyBird/index.tsx","apps/Arcade/index.tsx"],"names":["Papi","memo","size","color","dropShadow","useDropShadow","useNativeDriver","useDriver","location","Animated","ValueXY","x","y","useEffect","timing","toValue","duration","easing","Easing","bounce","start","View","style","getLayout","height","width","borderRadius","backgroundColor","PapiJump","useColor","goBack","useNavigation","styles","StyleSheet","create","container","surface","flex","navBack","useCallback","onLeftPress","title","primary","getLimit","value","limit","getBounds","Archero","timer","useRef","interval","gesture","x0","y0","dx","dy","window","useRootSelector","state","dimension","useState","dimensions","setDimensions","joystickSize","joystickCenter","thumbSize","initialJoystickLoc","initialCharLoc","charSize","initialThumbLoc","characterValueXY","joystick","thumb","character","addListener","panGesture","PanResponder","onStartShouldSetPanResponder","onMoveShouldSetPanResponderCapture","onPanResponderStart","_","g","current","onUpdate","onPanResponderMove","onPanResponderRelease","setInterval","clearInterval","spring","offset","offset2","moveJoystick","vx","vy","moveCharacter","angle","Math","atan2","dz","sqrt","pow","z","sin","cos","moveThumb","onLayout","event","layout","nativeEvent","success","panHandlers","brand","justifyContent","alignItems","Theme","overlay","colorWithOpacity","screens","Landing","navigate","onPress","screen","map","Button","key","Snake","FlappyBird","background","noHeader","headerShown","Stack","createStackNavigator","Navigator","screenOptions","Screen","component","name"],"mappings":"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","file":"static/js/8.0c4abe35.chunk.js","sourcesContent":["import React, {memo, useCallback, useEffect} from 'react';\nimport {Animated, Easing, StyleSheet, View} from 'react-native';\nimport {useNavigation} from '@react-navigation/native';\nimport {Screen} from '../../../components';\nimport {useColor, useDriver, useDropShadow} from '../../../hooks';\n\ntype PapiProps = {size: number; color: string};\n\nconst Papi = memo(({size, color}: PapiProps) => {\n  const dropShadow = useDropShadow();\n  const useNativeDriver = useDriver();\n  const location = new Animated.ValueXY({x: 0, y: 0});\n\n  useEffect(() => {\n    const toValue = {x: 300, y: 600};\n    Animated.timing(location, {\n      toValue,\n      duration: 3000,\n      easing: Easing.bounce,\n      useNativeDriver,\n    }).start();\n  }, [location, useNativeDriver]);\n\n  return (\n    <Animated.View\n      style={[\n        location.getLayout(),\n        {\n          height: size,\n          width: size,\n          borderRadius: size,\n          backgroundColor: color,\n          ...dropShadow(10),\n        },\n      ]}\n    />\n  );\n});\n\nexport const PapiJump = memo(function PapiJump() {\n  const color = useColor();\n  const {goBack} = useNavigation();\n  const styles = StyleSheet.create({\n    container: {\n      backgroundColor: color.surface,\n      flex: 1,\n    },\n  });\n  const navBack = useCallback(() => goBack(), [goBack]);\n  return (\n    <Screen onLeftPress={navBack} title=\"Papi Jump\">\n      <View style={styles.container}>\n        <Papi color={color.primary} size={50} />\n      </View>\n    </Screen>\n  );\n});\n","import React, {memo, useCallback, useRef, useState} from 'react';\nimport {\n  Animated,\n  LayoutChangeEvent,\n  PanResponder,\n  PanResponderInstance,\n  View,\n} from 'react-native';\nimport {useNavigation} from '@react-navigation/native';\nimport {useColor, useDriver} from '../../../hooks';\nimport {Theme, colorWithOpacity, useRootSelector} from '../../../utils';\nimport {Screen} from '../../../components';\n\nconst charSize = 50;\nconst charSpeed = 40;\nconst fps = 1000 / 60;\n\nconst getLimit = (value: number, limit: number) =>\n  value > limit ? limit : value < -limit ? -limit : value;\nconst getBounds = (value: number, limit: number, size: number) =>\n  value > limit - size ? limit - size : value < 0 ? 0 : value;\n\nexport const Archero = memo(function Archero() {\n  const color = useColor();\n  const {goBack} = useNavigation();\n  const useNativeDriver = useDriver();\n  const timer = useRef(false);\n  const interval = useRef<NodeJS.Timeout | null>(null);\n  const gesture = useRef({x0: 0, y0: 0, dx: 0, dy: 0});\n  const window = useRootSelector((state) => state.dimension.window);\n  const [dimensions, setDimensions] = useState({width: 1000, height: 1000});\n  const {width, height} = dimensions;\n  const smallest = width > height ? height : width;\n  const joystickSize = smallest / 3;\n  const joystickCenter = joystickSize / 2;\n  const thumbSize = joystickSize / 3;\n  const initialJoystickLoc = {\n    x: width / 2 - joystickCenter,\n    y: height - joystickSize - 75,\n  };\n  const initialCharLoc = {\n    x: width / 2 - charSize / 2,\n    y: height / 2 - charSize / 2,\n  };\n  const initialThumbLoc = {x: 0, y: 0};\n  let characterValueXY = initialCharLoc;\n  const joystick: Animated.ValueXY = new Animated.ValueXY(initialJoystickLoc);\n  const thumb: Animated.ValueXY = new Animated.ValueXY(initialThumbLoc);\n  const character: Animated.ValueXY = new Animated.ValueXY(initialCharLoc);\n  character.addListener(({x, y}) => {\n    characterValueXY = {x, y};\n  });\n\n  const moveCharacter = () => {\n    const {dx, dy} = gesture.current;\n    const vx = getLimit(dx, charSpeed);\n    const vy = getLimit(dy, charSpeed);\n    const x = getBounds(characterValueXY.x + vx, width, charSize);\n    const y = getBounds(characterValueXY.y + vy, height, charSize);\n    Animated.spring(character, {\n      toValue: {x, y},\n      useNativeDriver,\n    }).start();\n  };\n\n  const moveThumb = () => {\n    const {dx, dy} = gesture.current;\n    const angle = Math.atan2(dx, dy);\n    const dz = Math.sqrt(Math.pow(dx, 2) + Math.pow(dy, 2));\n    const z = getLimit(dz, thumbSize);\n    const x = z * Math.sin(angle);\n    const y = z * Math.cos(angle);\n    Animated.spring(thumb, {\n      toValue: {x, y},\n      useNativeDriver,\n    }).start();\n  };\n\n  const moveJoystick = () => {\n    const {x0, y0} = gesture.current;\n    const offset = window.height - dimensions.height;\n    const offset2 = window.width - dimensions.width;\n    // TODO: handle joystick location better in landscape\n    const toValue = {\n      x: x0 - joystickCenter - offset2 / 2,\n      y: y0 - joystickCenter - offset / 2 - joystickSize / 1.5,\n    };\n    Animated.spring(joystick, {toValue, useNativeDriver}).start();\n  };\n\n  const resetJoystick = () => {\n    Animated.spring(joystick, {\n      toValue: initialJoystickLoc,\n      useNativeDriver,\n    }).start();\n    Animated.spring(thumb, {\n      toValue: initialThumbLoc,\n      useNativeDriver,\n    }).start();\n  };\n\n  const panGesture: PanResponderInstance = PanResponder.create({\n    onStartShouldSetPanResponder: () => true,\n    onMoveShouldSetPanResponderCapture: () => true,\n    onPanResponderStart: (_, g) => {\n      timer.current = true;\n      gesture.current = {x0: g.x0, y0: g.y0, dx: g.dx, dy: g.dy};\n      onUpdate();\n    },\n    onPanResponderMove: (_, g) => {\n      gesture.current = {x0: g.x0, y0: g.y0, dx: g.dx, dy: g.dy};\n    },\n    onPanResponderRelease: () => {\n      timer.current = false;\n    },\n  });\n\n  const onUpdate = () => {\n    interval.current = setInterval(() => {\n      if (!timer.current) {\n        if (interval.current) {\n          clearInterval(interval.current);\n        }\n        resetJoystick();\n        return;\n      }\n      moveJoystick();\n      moveCharacter();\n      moveThumb();\n    }, fps);\n  };\n\n  const onLayout = (event: LayoutChangeEvent) => {\n    const layout = event.nativeEvent.layout;\n    setDimensions({width: layout.width, height: layout.height});\n  };\n\n  const navBack = useCallback(() => goBack(), [goBack]);\n\n  return (\n    <Screen onLeftPress={navBack} title=\"Archero\">\n      <View\n        onLayout={onLayout}\n        style={{flex: 1, backgroundColor: color.success}}\n        {...panGesture.panHandlers}>\n        <Animated.View\n          style={[\n            character.getLayout(),\n            {\n              width: charSize,\n              height: charSize,\n              backgroundColor: color.brand,\n            },\n          ]}\n        />\n        <Animated.View\n          style={[\n            joystick.getLayout(),\n            {\n              justifyContent: 'center',\n              alignItems: 'center',\n              borderRadius: 500,\n              width: joystickSize,\n              height: joystickSize,\n              backgroundColor: Theme.color.overlay,\n            },\n          ]}>\n          <View\n            style={{\n              justifyContent: 'center',\n              alignItems: 'center',\n              borderRadius: 500,\n              width: thumbSize,\n              height: thumbSize,\n              backgroundColor: Theme.color.overlay,\n            }}>\n            <Animated.View\n              style={[\n                thumb.getLayout(),\n                {\n                  borderRadius: 500,\n                  width: thumbSize,\n                  height: thumbSize,\n                  backgroundColor: colorWithOpacity(color.brand, 0.8),\n                },\n              ]}\n            />\n          </View>\n        </Animated.View>\n      </View>\n    </Screen>\n  );\n});\n","import React, {memo, useCallback} from 'react';\nimport {Button} from 'react-native';\nimport {useNavigation} from '@react-navigation/native';\nimport {Screen} from '../../../components';\n\nconst screens = ['archero', 'flappyBird', 'papiJump', 'snake'];\n\nexport const Landing = memo(function Landing() {\n  const {goBack, navigate} = useNavigation();\n  const navBack = useCallback(() => goBack(), [goBack]);\n  const onPress = useCallback((screen: string) => () => navigate(screen), [\n    navigate,\n  ]);\n  return (\n    <Screen onLeftPress={navBack} title=\"Arcade\">\n      {screens.map((screen) => (\n        <Button key={screen} onPress={onPress(screen)} title={screen} />\n      ))}\n    </Screen>\n  );\n});\n","import React, {memo, useCallback} from 'react';\nimport {useNavigation} from '@react-navigation/native';\nimport {Screen} from '../../../components';\n\nexport const Snake = memo(function Snake() {\n  const {goBack} = useNavigation();\n  const navBack = useCallback(() => goBack(), [goBack]);\n\n  return <Screen onLeftPress={navBack} title=\"Snake\" />;\n});\n","import React, {memo, useCallback} from 'react';\nimport {StyleSheet, View} from 'react-native';\nimport {useNavigation} from '@react-navigation/native';\nimport {Screen} from '../../../components';\nimport {useColor} from '../../../hooks';\n\nexport const FlappyBird = memo(function FlappyBird() {\n  const color = useColor();\n  const {goBack} = useNavigation();\n  const styles = StyleSheet.create({\n    container: {\n      backgroundColor: color.background,\n    },\n  });\n  const navBack = useCallback(() => goBack(), [goBack]);\n  return (\n    <Screen onLeftPress={navBack} title=\"Flappy Bird\">\n      <View style={styles.container} />\n    </Screen>\n  );\n});\n","import React, {memo} from 'react';\nimport {createStackNavigator} from '@react-navigation/stack';\nimport {PapiJump} from './PapiJump';\nimport {Archero} from './Archero';\nimport {Landing} from './Landing';\nimport {Snake} from './Snake';\nimport {FlappyBird} from './FlappyBird';\n\nconst noHeader = {headerShown: false};\nconst Stack = createStackNavigator();\n\nexport default memo(function Games() {\n  return (\n    <Stack.Navigator screenOptions={noHeader}>\n      <Stack.Screen component={Landing} name=\"landing\" />\n      <Stack.Screen component={FlappyBird} name=\"flappyBird\" />\n      <Stack.Screen component={Snake} name=\"snake\" />\n      <Stack.Screen component={PapiJump} name=\"papiJump\" />\n      <Stack.Screen component={Archero} name=\"archero\" />\n    </Stack.Navigator>\n  );\n});\n"],"sourceRoot":""}