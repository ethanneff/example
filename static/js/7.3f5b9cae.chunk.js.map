{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","apps/Focus/components/ListSection.tsx","apps/Focus/components/ListItem.tsx","apps/Focus/components/List.tsx","apps/Focus/index.tsx"],"names":["_iterableToArray","iter","Symbol","iterator","Object","prototype","toString","call","Array","from","_toConsumableArray","arr","isArray","i","arr2","length","iterableToArray","TypeError","ListSection","memo","item","View","style","alignItems","borderTopColor","borderTopWidth","flexDirection","justifyContent","marginTop","Theme","padding","p02","h3","title","dayOfMonth","overline","month","dayOfWeek","ListItem","showSection","onItemPress","currentItem","color","useColor","future","id","Date","now","iconColor","secondary","success","action","borderColor","primary","background","borderLeftWidth","p01","flex","TouchableOpacity","height","p10","paddingHorizontal","p04","paddingVertical","onPress","disabled","width","p20","name","size","paddingRight","hour","zone","body1","numberOfLines","ellipsizeMode","EllipsizeMode","Tail","itemHeight","initialIndex","dayjs","startOf","add","diff","getItemLayout","_","index","offset","getCurrentItem","currentTime","before","setHours","getHours","after","getFirstItemOfDay","items","keyExtractor","String","List","onEndReached","onEndReachedThreshold","useState","loading","setLoading","styles","StyleSheet","create","list","opacity","position","useEffect","setTimeout","FlatList","inverted","initialScrollIndex","data","renderItem","ActivityIndicator","infiniteScrollRegeneration","editItem","visible","Focus","modalItemEdit","setModalItemEdit","modalProfile","modalLogin","setItems","nav","useNav","generateMoreItems","useCallback","group","lastItem","valueOf","next","subtract","push","Math","random","format","handleItemPress","handleLoad","handleModalEditBackgroundPress","state","onLeftPress","to","duration","testID","onBackgroundPress"],"mappings":"oGAAe,SAASA,EAAiBC,GACvC,GAAIC,OAAOC,YAAYC,OAAOH,IAAkD,uBAAzCG,OAAOC,UAAUC,SAASC,KAAKN,GAAgC,OAAOO,MAAMC,KAAKR,GAD1H,mC,8CCGe,SAASS,EAAmBC,GACzC,OCJa,SAA4BA,GACzC,GAAIH,MAAMI,QAAQD,GAAM,CACtB,IAAK,IAAIE,EAAI,EAAGC,EAAO,IAAIN,MAAMG,EAAII,QAASF,EAAIF,EAAII,OAAQF,IAC5DC,EAAKD,GAAKF,EAAIE,GAGhB,OAAOC,GDFF,CAAkBH,IAAQ,OAAAK,EAAA,GAAgBL,IEJpC,WACb,MAAM,IAAIM,UAAU,mDFGqC,GAJ3D,mC,uJGUaC,EAAcC,gBAAK,gBAAGC,EAAH,EAAGA,KAAH,OAC9B,kBAACC,EAAA,EAAD,CACEC,MAAO,CACLC,WAAY,SACZC,eAAgB,OAChBC,eAAgB,EAChBC,cAAe,MACfC,eAAgB,SAChBC,UAAWC,IAAMC,QAAQC,IACzBD,QAASD,IAAMC,QAAQC,MAGzB,kBAAC,IAAD,CAAMC,IAAE,EAACC,MAAOb,EAAKc,aACrB,kBAAC,IAAD,CAAMC,UAAQ,EAACF,MAAK,WAAMb,EAAKgB,MAAX,aAAqBhB,EAAKiB,iBCRrCC,EAAWnB,gBACtB,YAA6D,IAA1DoB,EAAyD,EAAzDA,YAAanB,EAA4C,EAA5CA,KAAMoB,EAAsC,EAAtCA,YAAaC,EAAyB,EAAzBA,YAC3BC,EAAQC,cACRC,EAASxB,EAAKyB,GAAKC,KAAKC,MACxBC,EAAYJ,EAASF,EAAMO,UAAYP,EAAMQ,QAC7CjB,EAAQQ,EAAc,UAAYG,EAAS,SAAWxB,EAAK+B,OACjE,OACE,kBAAC9B,EAAA,EAAD,CACEC,MAAO,CACL8B,YAAaX,EAAcC,EAAMW,QAAUX,EAAMY,WACjDC,gBAAiB1B,IAAMC,QAAQ0B,IAC/BC,KAAM,IAGR,kBAACC,EAAA,EAAD,CACEpC,MAAO,CACLmC,KAAM,EACN/B,cAAe,MACfiC,OAAQ9B,IAAMC,QAAQ8B,IACtBC,kBAAmBhC,IAAMC,QAAQgC,IACjCC,gBAAiBlC,IAAMC,QAAQC,KAEjCiC,QAAS,kBAAMxB,EAAYpB,IAC3B6C,SAAUrB,GAEV,kBAACvB,EAAA,EAAD,CACEC,MAAO,CACLI,cAAe,MACfwC,MAAOrC,IAAMC,QAAQqC,MAGvB,kBAAC,IAAD,CACEC,KAAMxB,EAAS,SAAW,wBAC1ByB,KAAM,GACN3B,MAAOM,EACP1B,MAAO,CAAEgD,aAAczC,IAAMC,QAAQ0B,OAEvC,kBAAC,IAAD,CAAMvB,MAAK,UAAKb,EAAKmD,KAAV,YAAkBnD,EAAKoD,SAEpC,kBAAC,IAAD,CACElD,MAAO,CACLoB,MAAOA,EAAMO,UACbQ,KAAM,GAERxB,MAAOA,EACPwC,OAAK,EACLC,cAAe,EACfC,cAAeC,IAAcC,QAGhCtC,GAAe,kBAACrB,EAAD,CAAaE,KAAMA,Q,kBCzCrC0D,EAAajD,IAAMC,QAAQ8B,IAE3BmB,EACJC,MACGC,QAAQ,OACRC,IAAI,EAAG,OACPC,KAAKH,MAAS,QAAU,EAEvBI,EAAgB,SAACC,EAAQC,GAAT,MAA4B,CAChDvE,OAAQ+D,EACRS,OAAQT,EAAaQ,EACrBA,UAGIE,EAAiB,SAACpE,GACtB,IAAMqE,EAAc,IAAI3C,KAClB4C,EAASD,EAAYE,SAASF,EAAYG,WAAa,GACvDC,EAAQJ,EAAYE,SAASF,EAAYG,WAAa,GAC5D,OAAIxE,EAAKyB,GAAK6C,GAAUtE,EAAKyB,GAAKgD,GAM9BC,EAAoB,SAACR,EAAelE,EAAY2E,GAA5B,QACxBT,EAAQ,IAAYlE,EAAKc,aAAe6D,EAAMT,EAAQ,GAAGpD,YAErD8D,EAAe,SAAC5E,GAAD,OAAgB6E,OAAO7E,EAAKyB,KAEpCqD,EAAO/E,gBAClB,YAAyE,IAAtE4E,EAAqE,EAArEA,MAAOvD,EAA8D,EAA9DA,YAAa2D,EAAiD,EAAjDA,aAAcC,EAAmC,EAAnCA,sBAAmC,EACxCC,oBAAS,GAD+B,mBAC/DC,EAD+D,KACtDC,EADsD,KAEhEC,EAASC,IAAWC,OAAO,CAC/BC,KAAM,CACJC,QAASN,EAAU,EAAI,GAEzBA,QAAS,CACPO,SAAU,WACVlD,OAAQ,OACRO,MAAO,UAYX,OAFA4C,qBANe,WACbC,YAAW,WACTR,GAAW,KACV,OAGa,IAGhB,oCACE,kBAACS,EAAA,EAAD,CACE1F,MAAOkF,EAAOG,KACdM,UAAQ,EACRC,mBAAoBnC,EACpBK,cAAeA,EACfY,aAAcA,EACdmB,KAAMpB,EACNI,aAAcA,EACdC,sBAAuBA,EACvBgB,WAAY,gBAAGhG,EAAH,EAAGA,KAAMkE,EAAT,EAASA,MAAT,OACV,kBAAChD,EAAD,CACEG,YAAa+C,EAAepE,GAC5BA,KAAMA,EACNmB,YAAauD,EAAkBR,EAAOlE,EAAM2E,GAC5CvD,YAAaA,OAIlB8D,GAAW,kBAACe,EAAA,EAAD,CAAmBhD,KAAK,QAAQ/C,MAAOkF,EAAOF,c,wCCpFlE,IAAMgB,EAA6B,IAC7BC,EAAoD,CACxDC,SAAS,EACTpG,KAAM,MAEO,SAASqG,IAAS,IAAD,EACYpB,mBAASkB,GADrB,mBACvBG,EADuB,KACRC,EADQ,OAEPtB,oBAAS,GAAzBuB,EAFuB,sBAGTvB,oBAAS,GAAvBwB,EAHuB,sBAIJxB,mBAAiB,IAJb,mBAIvBN,EAJuB,KAIhB+B,EAJgB,KAKxBC,EAAMC,cAENC,EAAoBC,uBAAY,WAEpC,IADA,IAAMC,EAAK,YAAOpC,GACTlF,EAAI,EAAGA,EAAIyG,EAA4BzG,IAAK,CACnD,IAAMuH,EACa,IAAjBD,EAAMpH,OACFiE,MACGC,QAAQ,OACRC,IAAI,EAAG,OACPmD,UACHF,EAAMA,EAAMpH,OAAS,GAAG8B,GACxByF,EAAOtD,IAAMoD,GAAUG,SAAS,EAAG,QACnC1F,EAAKyF,EAAKD,UAChBF,EAAMK,KAAK,CACTrF,OAAQ8C,OAAOwC,KAAKC,UAAYzC,OAAOwC,KAAKC,UAC5CxG,WAAYoG,EAAKK,OAAO,KACxBtG,UAAWiG,EAAKK,OAAO,OACvBpE,KAAM+D,EAAKK,OAAO,KAClB9F,KACAT,MAAOkG,EAAKK,OAAO,OACnBnE,KAAM8D,EAAKK,OAAO,OAGtBb,EAASK,KACR,CAACpC,IAEE6C,EAAkBV,uBAAY,SAAC9G,GACnCuG,EAAiB,CAAEH,SAAS,EAAMpG,WACjC,IAEGyH,EAAaX,uBAAY,WACzBnC,EAAMhF,OAAS,GAGnBkH,MACC,CAACA,EAAmBlC,EAAMhF,SAEvB+H,EAAiCZ,uBAAY,WACjDP,GAAiB,SAAAoB,GAAK,sBAAUA,EAAV,CAAiBvB,SAAS,SAC/C,IAIH,OAFAV,oBAAU+B,EAAY,IAGpB,oCACE,kBAAC,IAAD,CAAQG,YAAajB,EAAIkB,GAAG,oBAAqBhH,MAAM,SACpD8D,EAAMhF,OAAS,GACd,kBAACmF,EAAD,CACEH,MAAOA,EACPvD,YAAaoG,EACbzC,aAAc8B,EACd7B,sBAAuB,MAI5BsB,EAAcF,SACb,kBAAC,IAAD,CACE0B,SAAU,IACVC,OAAO,WACPlH,MAAOyF,EAActG,KAAOsG,EAActG,KAAK+B,OAAS,QACxDiG,kBAAmBN,IAGtBlB,GACC,kBAAC,IAAD,CACEuB,OAAO,WACPlH,MAAM,QACNmH,kBAAmBN,IAGtBjB,GACC,kBAAC,IAAD,CACEsB,OAAO,WACPlH,MAAM,QACNmH,kBAAmBN","file":"static/js/7.3f5b9cae.chunk.js","sourcesContent":["export default function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}","import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}","export default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}","import React, { memo } from \"react\";\nimport { View } from \"react-native\";\nimport { Text } from \"../../../components\";\nimport { Theme } from \"../../../utils\";\nimport { Item } from \"./List\";\n\ninterface Props {\n  item: Item;\n}\n\nexport const ListSection = memo(({ item }: Props) => \n  <View\n    style={{\n      alignItems: \"center\",\n      borderTopColor: \"grey\",\n      borderTopWidth: 1,\n      flexDirection: \"row\",\n      justifyContent: \"center\",\n      marginTop: Theme.padding.p02,\n      padding: Theme.padding.p02\n    }}\n  >\n    <Text h3 title={item.dayOfMonth} />\n    <Text overline title={` ${item.month}, ${item.dayOfWeek}`} />\n  </View>\n);\n","import React, { memo } from \"react\";\nimport { TouchableOpacity, View } from \"react-native\";\nimport { EllipsizeMode, Icon, Text } from \"../../../components\";\nimport { Theme } from \"../../../utils\";\nimport { Item } from \"./List\";\nimport { ListSection } from \"./ListSection\";\nimport { useColor } from \"../../../hooks\";\n\ninterface Props {\n  showSection: boolean;\n  item: Item;\n  currentItem: boolean;\n  onItemPress(item: Item): void;\n}\n\nexport const ListItem = memo(\n  ({ showSection, item, onItemPress, currentItem }: Props) => {\n    const color = useColor();\n    const future = item.id > Date.now();\n    const iconColor = future ? color.secondary : color.success;\n    const title = currentItem ? \"current\" : future ? \"future\" : item.action;\n    return (\n      <View\n        style={{\n          borderColor: currentItem ? color.primary : color.background,\n          borderLeftWidth: Theme.padding.p01,\n          flex: 1\n        }}\n      >\n        <TouchableOpacity\n          style={{\n            flex: 1,\n            flexDirection: \"row\",\n            height: Theme.padding.p10,\n            paddingHorizontal: Theme.padding.p04,\n            paddingVertical: Theme.padding.p02\n          }}\n          onPress={() => onItemPress(item)} // TODO: usecallback\n          disabled={future}\n        >\n          <View\n            style={{\n              flexDirection: \"row\",\n              width: Theme.padding.p20\n            }}\n          >\n            <Icon\n              name={future ? \"cancel\" : \"checkbox-blank-circle\"}\n              size={14}\n              color={iconColor}\n              style={{ paddingRight: Theme.padding.p01 }}\n            />\n            <Text title={`${item.hour} ${item.zone}`} />\n          </View>\n          <Text\n            style={{\n              color: color.secondary,\n              flex: 1\n            }}\n            title={title}\n            body1\n            numberOfLines={1}\n            ellipsizeMode={EllipsizeMode.Tail}\n          />\n        </TouchableOpacity>\n        {showSection && <ListSection item={item} />}\n      </View>\n    );\n  }\n);\n","import React, { memo, useState, useEffect } from \"react\";\nimport { StyleSheet } from \"react-native\";\nimport { FlatList, ActivityIndicator } from \"react-native\";\nimport { ListItem } from \"./ListItem\";\nimport { Theme } from \"../../../utils\";\nimport dayjs from \"dayjs\";\n\nexport interface Item {\n  action: string;\n  dayOfMonth: string;\n  dayOfWeek: string;\n  hour: string;\n  id: number;\n  month: string;\n  zone: string;\n}\n\ninterface Props {\n  items: Item[];\n  onEndReached(): void;\n  onEndReachedThreshold: number;\n  onItemPress(item: Item): void;\n}\n\nconst itemHeight = Theme.padding.p10;\n\nconst initialIndex =\n  dayjs()\n    .startOf(\"day\")\n    .add(2, \"day\")\n    .diff(dayjs(), \"hour\") - 4;\n\nconst getItemLayout = (_: any, index: number) => ({\n  length: itemHeight,\n  offset: itemHeight * index,\n  index\n});\n\nconst getCurrentItem = (item: Item): boolean => {\n  const currentTime = new Date();\n  const before = currentTime.setHours(currentTime.getHours() - 1);\n  const after = currentTime.setHours(currentTime.getHours() + 1);\n  if (item.id > before && item.id < after) {\n    return true;\n  }\n  return false;\n};\n\nconst getFirstItemOfDay = (index: number, item: Item, items: Item[]) =>\n  index < 1 ? false : item.dayOfMonth !== items[index - 1].dayOfMonth;\n\nconst keyExtractor = (item: Item) => String(item.id);\n\nexport const List = memo(\n  ({ items, onItemPress, onEndReached, onEndReachedThreshold }: Props) => {\n    const [loading, setLoading] = useState(true);\n    const styles = StyleSheet.create({\n      list: {\n        opacity: loading ? 0 : 1\n      },\n      loading: {\n        position: \"absolute\",\n        height: \"100%\",\n        width: \"100%\"\n      }\n    });\n\n    const onLoad = () => {\n      setTimeout(() => {\n        setLoading(false);\n      }, 1000);\n    };\n\n    useEffect(onLoad, []);\n\n    return (\n      <>\n        <FlatList\n          style={styles.list}\n          inverted\n          initialScrollIndex={initialIndex}\n          getItemLayout={getItemLayout}\n          keyExtractor={keyExtractor}\n          data={items}\n          onEndReached={onEndReached}\n          onEndReachedThreshold={onEndReachedThreshold}\n          renderItem={({ item, index }) => \n            <ListItem\n              currentItem={getCurrentItem(item)}\n              item={item}\n              showSection={getFirstItemOfDay(index, item, items)}\n              onItemPress={onItemPress}\n            />\n          }\n        />\n        {loading && <ActivityIndicator size=\"large\" style={styles.loading} />}\n      </>\n    );\n  }\n);\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport { Screen, Dialog } from \"../../components\";\nimport { useNav } from \"../../hooks\";\nimport { List, Item } from \"./components/List\";\nimport dayjs from \"dayjs\";\n\n// TODO: flatlist on web\n// TODO: rename item.action to item.title\n// TODO: fix refresh scroll jitter\n// TODO: re-rendering everything because dialog is same level as list\n\nconst infiniteScrollRegeneration = 100;\nconst editItem: { visible: boolean; item: Item | null } = {\n  visible: false,\n  item: null\n};\nexport default function Focus() {\n  const [modalItemEdit, setModalItemEdit] = useState(editItem);\n  const [modalProfile] = useState(false);\n  const [modalLogin] = useState(false);\n  const [items, setItems] = useState<Item[]>([]);\n  const nav = useNav();\n\n  const generateMoreItems = useCallback(() => {\n    const group = [...items];\n    for (let i = 0; i < infiniteScrollRegeneration; i++) {\n      const lastItem =\n        group.length === 0\n          ? dayjs()\n              .startOf(\"day\")\n              .add(2, \"day\")\n              .valueOf()\n          : group[group.length - 1].id;\n      const next = dayjs(lastItem).subtract(1, \"hour\");\n      const id = next.valueOf();\n      group.push({\n        action: String(Math.random()) + String(Math.random()),\n        dayOfMonth: next.format(\"D\"),\n        dayOfWeek: next.format(\"ddd\"),\n        hour: next.format(\"h\"),\n        id,\n        month: next.format(\"MMM\"),\n        zone: next.format(\"a\")\n      });\n    }\n    setItems(group);\n  }, [items]);\n\n  const handleItemPress = useCallback((item: Item) => {\n    setModalItemEdit({ visible: true, item });\n  }, []);\n\n  const handleLoad = useCallback(() => {\n    if (items.length > 0) {\n      return;\n    }\n    generateMoreItems();\n  }, [generateMoreItems, items.length]);\n\n  const handleModalEditBackgroundPress = useCallback(() => {\n    setModalItemEdit(state => ({ ...state, visible: false }));\n  }, []);\n\n  useEffect(handleLoad, []);\n\n  return (\n    <>\n      <Screen onLeftPress={nav.to(\"portfolioLanding\")} title=\"Focus\">\n        {items.length > 0 && \n          <List\n            items={items}\n            onItemPress={handleItemPress}\n            onEndReached={generateMoreItems}\n            onEndReachedThreshold={0.5}\n          />\n        }\n      </Screen>\n      {modalItemEdit.visible && \n        <Dialog\n          duration={2000}\n          testID=\"editItem\"\n          title={modalItemEdit.item ? modalItemEdit.item.action : \"empty\"}\n          onBackgroundPress={handleModalEditBackgroundPress}\n        />\n      }\n      {modalProfile && \n        <Dialog\n          testID=\"editItem\"\n          title=\"hello\"\n          onBackgroundPress={handleModalEditBackgroundPress}\n        />\n      }\n      {modalLogin && \n        <Dialog\n          testID=\"editItem\"\n          title=\"hello\"\n          onBackgroundPress={handleModalEditBackgroundPress}\n        />\n      }\n    </>\n  );\n}\n"],"sourceRoot":""}