{"version":3,"sources":["apps/Debug/screens/GameOfLife/utils.ts","apps/Debug/screens/GameOfLife/Cell.tsx","apps/Debug/screens/GameOfLife/index.tsx"],"names":["operations","generateBoard","size","random","board","i","j","Math","Cell","memo","props","color","useColor","TouchableOpacity","onPress","onItemPress","x","y","key","style","height","width","backgroundColor","row","primary","surface","borderWidth","borderColor","light","useState","run","delay","count","form","setForm","setBoard","useRef","useRootSelector","getSmallestDimension","nav","useNav","styles","StyleSheet","create","container","background","onClear","useCallback","state","map","rows","item","swapBoardItem","onRandom","loop","current","_","neighbors","length","forEach","newI","newK","determineBoardItem","setTimeout","onStart","onCountSlide","value","onDelaySlide","onLeftPress","to","title","View","flexDirection","h4","alignSelf","flex","maximumValue","minimumValue","step","onSlidingComplete","floor","justifyContent"],"mappings":"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","file":"static/js/27.b3fff444.chunk.js","sourcesContent":["const operations = [\n  [0, 1],\n  [0, -1],\n  [1, -1],\n  [-1, 1],\n  [1, 1],\n  [-1, -1],\n  [1, 0],\n  [-1, 0]\n];\n\ntype BoardItem = 0 | 1;\n\nexport type Board = Array<Array<BoardItem>>;\n\nexport const generateBoard = (size: number, random = 0) => {\n  const board: Board = [];\n  for (let i = 0; i < size; i++) {\n    board[i] = [];\n    for (let j = 0; j < size; j++) {\n      board[i][j] = Math.random() > random ? 0 : 1;\n    }\n  }\n  return board;\n};\n\nexport const determineBoardItem = (board: Board, i: number, j: number) => {\n  let neighbors = 0;\n  const item = board[i][j];\n  const length = board.length;\n  operations.forEach(([x, y]) => {\n    const newI = i + x;\n    const newK = j + y;\n    if (newI >= 0 && newI < length && newK >= 0 && newK < length) {\n      neighbors += board[newI][newK];\n    }\n  });\n\n  return neighbors < 2 || neighbors > 3\n    ? 0\n    : item === 0 && neighbors === 3\n    ? 1\n    : item;\n};\n\nexport const swapBoardItem = (\n  item: BoardItem,\n  x: number,\n  y: number,\n  i: number,\n  j: number\n) => {\n  return i === x && y === j ? item ? 0 : 1 : item;\n};\n","import React, { memo } from \"react\";\nimport { useColor } from \"../../../../hooks\";\nimport { TouchableOpacity } from \"react-native\";\n\ninterface CellProps {\n  x: number;\n  y: number;\n  row: number;\n  size: number;\n  onItemPress(x: number, y: number): () => void;\n}\n\nexport const Cell = memo(function Cell(props: CellProps) {\n  const color = useColor();\n  return (\n    <TouchableOpacity\n      onPress={props.onItemPress(props.x, props.y)}\n      key={`${props.x}-${props.y}`}\n      style={{\n        height: props.size,\n        width: props.size,\n        backgroundColor: props.row ? color.primary : color.surface,\n        borderWidth: 1,\n        borderColor: color.light\n      }}\n    />\n  );\n});\n","import React, { useState, useRef, useCallback, memo } from \"react\";\nimport { StyleSheet, View } from \"react-native\";\nimport { Screen, Button, Slider, Text } from \"../../../../components\";\nimport { useColor, useNav } from \"../../../../hooks\";\nimport { useRootSelector } from \"../../../../utils\";\nimport { getSmallestDimension } from \"../../../../models\";\nimport { generateBoard, swapBoardItem, determineBoardItem } from \"./utils\";\nimport { Cell } from \"./Cell\";\n\nexport default memo(function DebugGameOfLife() {\n  const color = useColor();\n  const [form, setForm] = useState({\n    run: false,\n    delay: 16,\n    count: 20\n  });\n  const [board, setBoard] = useState(generateBoard(form.count, 0.5));\n  const run = useRef(form.run);\n  const delay = useRef(form.delay);\n  const smallest = useRootSelector(getSmallestDimension);\n  const size = smallest / form.count;\n  const nav = useNav();\n  const styles = StyleSheet.create({\n    container: {\n      backgroundColor: color.background\n    }\n  });\n\n  const onClear = useCallback(() => setBoard(generateBoard(form.count)), [\n    form.count\n  ]);\n\n  const onItemPress = useCallback(\n    (x: number, y: number) => () => {\n      setBoard(state =>\n        state.map((rows, i) =>\n          rows.map((item, j) => swapBoardItem(item, x, y, i, j))\n        )\n      );\n    },\n    []\n  );\n\n  const onRandom = useCallback(() => setBoard(generateBoard(form.count, 0.5)), [\n    form.count\n  ]);\n\n  const loop = useCallback(() => {\n    if (!run.current) {\n      return;\n    }\n\n    setBoard(state =>\n      state.map((rows, i) =>\n        rows.map((_, j) => determineBoardItem(state, i, j))\n      )\n    );\n\n    setTimeout(loop, delay.current);\n  }, []);\n\n  const onStart = useCallback(() => {\n    setForm(state => ({ ...state, run: !state.run }));\n    run.current = !run.current;\n    loop();\n  }, [loop]);\n\n  const onCountSlide = useCallback((value: number) => {\n    setForm(state => ({ ...state, count: value }));\n    setBoard(generateBoard(value, 0.5));\n  }, []);\n\n  const onDelaySlide = useCallback((value: number) => {\n    setForm(state => ({ ...state, delay: value }));\n    delay.current = value;\n  }, []);\n\n  return (\n    <Screen onLeftPress={nav.to(\"debug\")} title=\"Game of life\">\n      <View style={{ flexDirection: \"row\" }}>\n        <Text\n          title={`count: ${form.count}`}\n          h4\n          style={{ alignSelf: \"center\" }}\n        />\n        <Slider\n          style={{ flex: 1 }}\n          value={10}\n          maximumValue={100}\n          minimumValue={1}\n          step={1}\n          onSlidingComplete={onCountSlide}\n        />\n      </View>\n      <View style={{ flexDirection: \"row\" }}>\n        <Text\n          title={`delay: ${Math.floor(form.delay)}`}\n          h4\n          style={{ alignSelf: \"center\" }}\n        />\n        <Slider\n          style={{ flex: 1 }}\n          value={10}\n          maximumValue={100}\n          minimumValue={1}\n          step={1}\n          onSlidingComplete={onDelaySlide}\n        />\n      </View>\n      <View style={styles.container}>\n        <View style={{ flexDirection: \"row\", justifyContent: \"center\" }}>\n          <Button title={form.run ? \"stop\" : \"start\"} onPress={onStart} />\n          <Button title=\"random\" onPress={onRandom} />\n          <Button title=\"clear\" onPress={onClear} />\n        </View>\n        <View>\n          {board.map((rows, x) => \n            <View\n              key={`${x}`}\n              style={{ flexDirection: \"row\", justifyContent: \"center\" }}\n            >\n              {rows.map((row, y) => \n                <Cell\n                  key={`${x}-${y}`}\n                  row={row}\n                  x={x}\n                  y={y}\n                  size={size}\n                  onItemPress={onItemPress}\n                />\n              )}\n            </View>\n          )}\n        </View>\n      </View>\n    </Screen>\n  );\n});\n"],"sourceRoot":""}