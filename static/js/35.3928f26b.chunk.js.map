{"version":3,"sources":["apps/Playground/screens/ImageCollection/AsyncImage.tsx","apps/Playground/screens/ImageCollection/index.tsx"],"names":["AsyncImage","uri","height","width","color","size","nativeDriver","useNativeDriver","imageAnimated","Animated","Value","indicatorAnimated","styles","StyleSheet","create","indicatorOverlay","justifyContent","position","containerStyle","imageStyle","opacity","indicatorStyle","View","style","Image","source","onLoad","parallel","timing","toValue","start","ActivityIndicator","Container","data","Math","random","numColumns","infiniteScrollThreshold","columnWidth","Dimensions","get","imageUrl","nav","to","props","navigate","fetchMore","push","renderImage","onLeftPress","this","title","FlatList","keyExtractor","toString","onEndReached","onEndReachedThreshold","renderItem","React","PureComponent","mapDispatchToProps","connect"],"mappings":"kPAWO,SAASA,EAAT,GAMI,IALTC,EAKQ,EALRA,IACAC,EAIQ,EAJRA,OACAC,EAGQ,EAHRA,MAGQ,IAFRC,aAEQ,MAFA,QAEA,MADRC,YACQ,MADD,QACC,EACFC,EAAeC,cACfC,EAAgB,IAAIC,IAASC,MAAM,GACnCC,EAAoB,IAAIF,IAASC,MAAM,GACvCE,EAASC,IAAWC,OAAO,CAC/BC,iBAAkB,CAACC,eAAgB,SAAUC,SAAU,cAenDC,EAAiB,CAACf,QAAOD,UACzBiB,EAAa,CAACD,EAAgB,CAACE,QAASZ,IACxCa,EAAiB,CACrBH,EACA,CAACE,QAAST,GACVC,EAAOG,kBAET,OACE,kBAACO,EAAA,EAAD,CAAMC,MAAOL,GACX,kBAACT,EAAA,EAASe,MAAV,CAAgBC,OAAQ,CAACxB,OAAMsB,MAAOJ,EAAYO,OAtBlC,WAClBjB,IAASkB,SAAS,CAChBlB,IAASmB,OAAOjB,EAAmB,CACjCkB,QAAS,EACTtB,gBAAiBD,IAEnBG,IAASmB,OAAOpB,EAAe,CAC7BqB,QAAS,EACTtB,gBAAiBD,MAElBwB,WAaD,kBAACrB,EAAA,EAASa,KAAV,CAAeC,MAAOF,GACpB,kBAACU,EAAA,EAAD,CAAmB1B,KAAMA,EAAMD,MAAOA,M,ICnCxC4B,E,4MACIC,KAAiB,CACvBC,KAAKC,SACLD,KAAKC,SACLD,KAAKC,SACLD,KAAKC,SACLD,KAAKC,SACLD,KAAKC,SACLD,KAAKC,SACLD,KAAKC,U,EAECC,WAAa,E,EACbC,wBAA0B,G,EAC1BC,YAAcC,IAAWC,IAAI,UAAUrC,MAAQ,EAAKiC,W,EACpDK,S,gCAAoC,EAAKH,Y,YAAe,EAAKA,a,EAgB7DI,IAAM,SAACC,GAAD,OAA0B,kBAAM,EAAKC,MAAMC,SAASF,K,EAE1DG,UAAY,WAClB,EAAKb,KAAKc,KAAKb,KAAKC,UACpB,EAAKF,KAAKc,KAAKb,KAAKC,UACpB,EAAKF,KAAKc,KAAKb,KAAKC,UACpB,EAAKF,KAAKc,KAAKb,KAAKC,UACpB,EAAKF,KAAKc,KAAKb,KAAKC,W,EAGda,YAAc,kBACpB,kBAAChD,EAAD,CACEC,IAAK,EAAKwC,SACVtC,MAAO,EAAKmC,YACZpC,OAAQ,EAAKoC,e,uDA5Bf,OACE,kBAAC,IAAD,CAAQW,YAAaC,KAAKR,IAAI,cAAeS,MAAM,oBACjD,kBAACC,EAAA,EAAD,CACEC,aAAc,SAACpB,GAAD,OAAUA,EAAKqB,YAC7BrB,KAAMiB,KAAKjB,KACXsB,aAAcL,KAAKJ,UACnBU,sBAAuBN,KAAKb,wBAC5BD,WAAYc,KAAKd,WACjBqB,WAAYP,KAAKF,mB,GAxBHU,IAAMC,eAiDxBC,EAAoC,CAACf,cAE5BgB,sBAAQ,KAAMD,EAAdC,CAAkC7B","file":"static/js/35.3928f26b.chunk.js","sourcesContent":["import React from 'react';\nimport {ActivityIndicator, Animated, StyleSheet, View} from 'react-native';\nimport {useNativeDriver} from '../../../../hooks';\ninterface Props {\n  uri: string;\n  height: number;\n  width: number;\n  color?: string;\n  size?: number | 'small' | 'large';\n}\n\nexport function AsyncImage({\n  uri,\n  height,\n  width,\n  color = 'black',\n  size = 'small',\n}: Props) {\n  const nativeDriver = useNativeDriver();\n  const imageAnimated = new Animated.Value(0);\n  const indicatorAnimated = new Animated.Value(1);\n  const styles = StyleSheet.create({\n    indicatorOverlay: {justifyContent: 'center', position: 'absolute'},\n  });\n  const onImageLoad = () => {\n    Animated.parallel([\n      Animated.timing(indicatorAnimated, {\n        toValue: 0,\n        useNativeDriver: nativeDriver,\n      }),\n      Animated.timing(imageAnimated, {\n        toValue: 1,\n        useNativeDriver: nativeDriver,\n      }),\n    ]).start();\n  };\n\n  const containerStyle = {width, height};\n  const imageStyle = [containerStyle, {opacity: imageAnimated}];\n  const indicatorStyle = [\n    containerStyle,\n    {opacity: indicatorAnimated},\n    styles.indicatorOverlay,\n  ];\n  return (\n    <View style={containerStyle}>\n      <Animated.Image source={{uri}} style={imageStyle} onLoad={onImageLoad} />\n      <Animated.View style={indicatorStyle}>\n        <ActivityIndicator size={size} color={color} />\n      </Animated.View>\n    </View>\n  );\n}\n","import React from 'react';\nimport {Dimensions, FlatList} from 'react-native';\nimport {connect} from 'react-redux';\nimport {Screen} from '../../../../components';\nimport {NavigationScreen, navigate} from '../../../../models';\nimport {AsyncImage} from './AsyncImage';\n\ninterface DispatchProps {\n  navigate: typeof navigate;\n}\n\ntype Props = DispatchProps;\n\nclass Container extends React.PureComponent<Props> {\n  private data: number[] = [\n    Math.random(),\n    Math.random(),\n    Math.random(),\n    Math.random(),\n    Math.random(),\n    Math.random(),\n    Math.random(),\n    Math.random(),\n  ];\n  private numColumns = 3;\n  private infiniteScrollThreshold = 0.3;\n  private columnWidth = Dimensions.get('window').width / this.numColumns;\n  private imageUrl = `http://lorempixel.com/${this.columnWidth}/${this.columnWidth}`;\n  public render() {\n    return (\n      <Screen onLeftPress={this.nav('playground')} title=\"Image Collection\">\n        <FlatList\n          keyExtractor={(data) => data.toString()}\n          data={this.data}\n          onEndReached={this.fetchMore}\n          onEndReachedThreshold={this.infiniteScrollThreshold}\n          numColumns={this.numColumns}\n          renderItem={this.renderImage}\n        />\n      </Screen>\n    );\n  }\n\n  private nav = (to: NavigationScreen) => () => this.props.navigate(to);\n\n  private fetchMore = () => {\n    this.data.push(Math.random());\n    this.data.push(Math.random());\n    this.data.push(Math.random());\n    this.data.push(Math.random());\n    this.data.push(Math.random());\n  };\n\n  private renderImage = () => (\n    <AsyncImage\n      uri={this.imageUrl}\n      width={this.columnWidth}\n      height={this.columnWidth}\n    />\n  );\n}\n\nconst mapDispatchToProps: DispatchProps = {navigate};\n\nexport default connect(null, mapDispatchToProps)(Container);\n"],"sourceRoot":""}